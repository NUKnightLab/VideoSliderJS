(function(e){e.VCO={VERSION:"0.1",_originalL:e.VCO}})(this);VCO.debug=!0;VCO.Bind=function(e,t){return function(){return e.apply(t,arguments)}};trace=function(e){VCO.debug&&(window.console?console.log(e):typeof jsTrace!="undefined"&&jsTrace.send(e))};VCO.Util={extend:function(e){var t=Array.prototype.slice.call(arguments,1);for(var n=0,r=t.length,i;n<r;n++){i=t[n]||{};for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s])}return e},setOptions:function(e,t){e.options=VCO.Util.extend({},e.options,t);e.options.uniqueid===""&&(e.options.uniqueid=VCO.Util.unique_ID(6))},setData:function(e,t){e.data=VCO.Util.extend({},e.data,t);e.data.uniqueid===""&&(e.data.uniqueid=VCO.Util.unique_ID(6))},mergeData:function(e,t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},stamp:function(){var e=0,t="_vco_id";return function(n){n[t]=n[t]||++e;return n[t]}}(),isArray:function(){if(Array.isArray)return Array.isArray;var e=Object.prototype.toString,t=e.call([]);return function(n){return e.call(n)===t}}(),unique_ID:function(e,t){var n=function(e){return Math.floor(Math.random()*e)},r=function(){var e="abcdefghijklmnopqurstuvwxyz";return e.substr(n(32),1)},i=function(e){var t="";for(var n=0;n<e;n++)t+=r();return t};return t?t+"-"+i(e):"vco-"+i(e)},htmlify:function(e){return e.match(/<\s*p[^>]*>([^<]*)<\s*\/\s*p\s*>/)?e:"<p>"+e+"</p>"},getParamString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return"?"+t.join("&")},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},falseFn:function(){return!1},requestAnimFrame:function(){function e(e){window.setTimeout(e,1e3/60)}var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||e;return function(n,r,i,s){n=r?VCO.Util.bind(n,r):n;i&&t===e?n():t(n,s)}}(),bind:function(e,t){return function(){return e.apply(t,arguments)}},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,n){var r=t[n];if(!t.hasOwnProperty(n))throw new Error("No value provided for variable "+e);return r})},hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},ratio:{square:function(e){var t={w:0,h:0};if(e.w>e.h&&e.h>0){t.h=e.h;t.w=e.h}else{t.w=e.w;t.h=e.w}return t},r16_9:function(e){return e.w!==null&&e.w!==""?Math.round(e.w/16*9):e.h!==null&&e.h!==""?Math.round(e.h/9*16):0},r4_3:function(e){if(e.w!==null&&e.w!=="")return Math.round(e.w/4*3);if(e.h!==null&&e.h!=="")return Math.round(e.h/3*4)}},getObjectAttributeByIndex:function(e,t){if(typeof e!="undefined"){var n=0;for(var r in e){if(t===n)return e[r];n++}return""}return""},getUrlVars:function(e){var t,n=[],r,i;t=e.toString();t.match("&#038;")?t=t.replace("&#038;","&"):t.match("&#38;")?t=t.replace("&#38;","&"):t.match("&amp;")&&(t=t.replace("&amp;","&"));i=t.slice(t.indexOf("?")+1).split("&");for(var s=0;s<i.length;s++){r=i[s].split("=");n.push(r[0]);n[r[0]]=r[1]}return n}};(function(VCO){var Zepto=function(){function D(e){return e==null?String(e):N[C.call(e)]||"object"}function P(e){return D(e)=="function"}function H(e){return e!=null&&e==e.window}function B(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function j(e){return D(e)=="object"}function F(e){return j(e)&&!H(e)&&Object.getPrototypeOf(e)==Object.prototype}function I(e){return typeof e.length=="number"}function q(e){return o.call(e,function(e){return e!=null})}function R(e){return e.length>0?n.fn.concat.apply([],e):e}function U(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function z(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function W(e,t){return typeof t=="number"&&!l[U(e)]?t+"px":t}function X(e){var t,n;if(!a[e]){t=u.createElement(e);u.body.appendChild(t);n=getComputedStyle(t,"").getPropertyValue("display");t.parentNode.removeChild(t);n=="none"&&(n="block");a[e]=n}return a[e]}function V(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function $(n,r,i){for(t in r)if(i&&(F(r[t])||_(r[t]))){F(r[t])&&!F(n[t])&&(n[t]={});_(r[t])&&!_(n[t])&&(n[t]=[]);$(n[t],r[t],i)}else r[t]!==e&&(n[t]=r[t])}function J(e,t){return t==null?n(e):n(e).filter(t)}function K(e,t,n,r){return P(t)?t.call(e,n,r):t}function Q(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function G(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Y(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:!/^0/.test(e)&&!isNaN(t=Number(e))?t:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(r){return e}}function Z(e,t){t(e);for(var n in e.childNodes)Z(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=u.createElement("table"),b=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":u.createElement("div")},E=/complete|loaded|interactive/,S=/^\.([\w-]+)$/,x=/^#([\w-]*)$/,T=/^[\w-]*$/,N={},C=N.toString,k={},L,A,O=u.createElement("div"),M={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},_=Array.isArray||function(e){return e instanceof Array};k.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;s&&(i=O).appendChild(e);r=~k.qsa(i,t).indexOf(e);s&&O.removeChild(e);return r};L=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})};A=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})};k.fragment=function(t,r,i){var o,a,f;h.test(t)&&(o=n(u.createElement(RegExp.$1)));if(!o){t.replace&&(t=t.replace(p,"<$1></$2>"));r===e&&(r=c.test(t)&&RegExp.$1);r in w||(r="*");f=w[r];f.innerHTML=""+t;o=n.each(s.call(f.childNodes),function(){f.removeChild(this)})}if(F(i)){a=n(o);n.each(i,function(e,t){m.indexOf(e)>-1?a[e](t):a.attr(e,t)})}return o};k.Z=function(e,t){e=e||[];e.__proto__=n.fn;e.selector=t||"";return e};k.isZ=function(e){return e instanceof k.Z};k.init=function(t,r){var i;if(!t)return k.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&c.test(t))i=k.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=k.qsa(u,t)}}else{if(P(t))return n(u).ready(t);if(k.isZ(t))return t;if(_(t))i=q(t);else if(j(t))i=[t],t=null;else if(c.test(t))i=k.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=k.qsa(u,t)}}return k.Z(i,t)};n=function(e,t){return k.init(e,t)};n.extend=function(e){var t,n=s.call(arguments,1);if(typeof e=="boolean"){t=e;e=n.shift()}n.forEach(function(n){$(e,n,t)});return e};k.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",o=r||i?t.slice(1):t,u=T.test(o);return B(e)&&u&&r?(n=e.getElementById(o))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(u&&!r?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))};n.contains=function(e,t){return e!==t&&e.contains(t)};n.type=D;n.isFunction=P;n.isWindow=H;n.isArray=_;n.isPlainObject=F;n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0};n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)};n.camelCase=L;n.trim=function(e){return e==null?"":String.prototype.trim.call(e)};n.uuid=0;n.support={};n.expr={};n.map=function(e,t){var n,r=[],i,s;if(I(e))for(i=0;i<e.length;i++){n=t(e[i],i);n!=null&&r.push(n)}else for(s in e){n=t(e[s],s);n!=null&&r.push(n)}return R(r)};n.each=function(e,t){var n,r;if(I(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e};n.grep=function(e,t){return o.call(e,t)};window.JSON&&(n.parseJSON=JSON.parse);n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){N["[object "+t+"]"]=t.toLowerCase()});n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){E.test(u.readyState)&&u.body?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1);return this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){i.every.call(this,function(t,n){return e.call(t,n,t)!==!1});return this},filter:function(e){return P(e)?this.not(this.not(e)):n(o.call(this,function(t){return k.matches(t,e)}))},add:function(e,t){return n(A(this.concat(n(e,t))))},is:function(e){return this.length>0&&k.matches(this[0],e)},not:function(t){var r=[];if(P(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):I(t)&&P(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return j(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!j(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!j(e)?e:n(e)},find:function(e){var t,r=this;typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(k.qsa(this[0],e)):t=this.map(function(){return k.qsa(this,e)});return t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:k.matches(r,e)))r=r!==t&&!B(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!B(e)&&t.indexOf(e)<0){t.push(e);return e}});return J(t,e)},parent:function(e){return J(A(this.pluck("parentNode")),e)},children:function(e){return J(this.map(function(){return V(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return J(this.map(function(e,t){return o.call(V(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display="");getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=X(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){this.parent().each(function(){n(this).replaceWith(n(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(t){var r=this.innerHTML;n(this).empty().append(K(this,e,t,r))})},text:function(t){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===e?"":""+t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(j(n))for(t in n)Q(this,t,n[t]);else Q(this,n,K(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&Q(this,e)})},prop:function(t,n){t=M[t]||t;return n===e?this[0]&&this[0][t]:this.each(function(e){this[t]=K(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+t.replace(v,"-$1").toLowerCase(),n);return r!==null?Y(r):e},val:function(e){return arguments.length===0?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=K(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=K(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative");r.css(o)});if(this.length==0)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i=this[0],s=getComputedStyle(i,"");if(!i)return;if(typeof e=="string")return i.style[L(e)]||s.getPropertyValue(e);if(_(e)){var o={};n.each(_(e)?e:[e],function(e,t){o[t]=i.style[L(t)]||s.getPropertyValue(t)});return o}}var u="";if(D(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(U(e))}):u=U(e)+":"+W(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(U(t))}):u+=U(t)+":"+W(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(G(e))},z(e)):!1},addClass:function(e){return e?this.each(function(t){r=[];var i=G(this),s=K(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this);r.length&&G(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(t===e)return G(this,"");r=G(this);K(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(z(e)," ")});G(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=K(this,t,i,G(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();r.top-=parseFloat(n(e).css("margin-top"))||0;r.left-=parseFloat(n(e).css("margin-left"))||0;i.top+=parseFloat(n(t[0]).css("border-top-width"))||0;i.left+=parseFloat(n(t[0]).css("border-left-width"))||0;return{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}};n.fn.detach=n.fn.remove;["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?H(o)?o["inner"+r]:B(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this);o.css(t,K(this,i,e,o[t]()))})}});g.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){e=D(t);return e=="object"||e=="array"||t==null?t:k.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,u){s=r?u:u.parentNode;u=t==0?u.nextSibling:t==1?u.firstChild:t==2?u:null;i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();Z(s.insertBefore(e,u),function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})};n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){n(t)[e](this);return this}});k.Z.prototype=n.fn;k.uniq=A;k.deserializeValue=Y;n.zepto=k;return n}();window.Zepto=Zepto;window.$===undefined&&(window.$=Zepto);(function(e){function h(e){return e._zid||(e._zid=n++)}function p(e,t,n,r){t=d(t);if(t.ns)var i=v(t.ns);return(u[h(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||h(e.fn)===h(n))&&(!r||e.sel==r)})}function d(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function v(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function m(e,t){return e.del&&!f&&e.e in l||!!t}function g(e){return c[e]||f&&l[e]||e}function y(t,n,i,s,o,a,f){var l=h(t),p=u[l]||(u[l]=[]);n.split(/\s/).forEach(function(n){if(n=="ready")return e(document).ready(i);var u=d(n);u.fn=i;u.sel=o;u.e in c&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return u.fn.apply(this,arguments)});u.del=a;var l=a||i;u.proxy=function(e){e=T(e);if(e.isImmediatePropagationStopped())return;e.data=s;var n=l.apply(t,e._args==r?[e]:[e].concat(e._args));n===!1&&(e.preventDefault(),e.stopPropagation());return n};u.i=p.length;p.push(u);"addEventListener"in t&&t.addEventListener(g(u.e),u.proxy,m(u,f))})}function b(e,t,n,r,i){var s=h(e);(t||"").split(/\s/).forEach(function(t){p(e,t,n,r).forEach(function(t){delete u[s][t.i];"removeEventListener"in e&&e.removeEventListener(g(t.e),t.proxy,m(t,i))})})}function T(t,n){if(n||!t.isDefaultPrevented){n||(n=t);e.each(x,function(e,r){var i=n[e];t[e]=function(){this[r]=w;return i&&i.apply(n,arguments)};t[r]=E});if(n.defaultPrevented!==r?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())t.isDefaultPrevented=w}return t}function N(e){var t,n={originalEvent:e};for(t in e)!S.test(t)&&e[t]!==r&&(n[t]=e[t]);return T(n,e)}var t=e.zepto.qsa,n=1,r,i=Array.prototype.slice,s=e.isFunction,o=function(e){return typeof e=="string"},u={},a={},f="onfocusin"in window,l={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents";e.event={add:y,remove:b};e.proxy=function(t,n){if(s(t)){var r=function(){return t.apply(n,arguments)};r._zid=h(t);return r}if(o(n))return e.proxy(t[n],t);throw new TypeError("expected function")};e.fn.bind=function(e,t,n){return this.on(e,t,n)};e.fn.unbind=function(e,t){return this.off(e,t)};e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var w=function(){return!0},E=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)};e.fn.undelegate=function(e,t,n){return this.off(t,e,n)};e.fn.live=function(t,n){e(document.body).delegate(this.selector,t,n);return this};e.fn.die=function(t,n){e(document.body).undelegate(this.selector,t,n);return this};e.fn.on=function(t,n,u,a,f){var l,c,h=this;if(t&&!o(t)){e.each(t,function(e,t){h.on(e,n,u,t,f)});return h}!o(n)&&!s(a)&&a!==!1&&(a=u,u=n,n=r);if(s(u)||u===!1)a=u,u=r;a===!1&&(a=E);return h.each(function(r,s){f&&(l=function(e){b(s,e.type,a);return a.apply(this,arguments)});n&&(c=function(t){var r,o=e(t.target).closest(n,s).get(0);if(o&&o!==s){r=e.extend(N(t),{currentTarget:o,liveFired:s});return(l||a).apply(o,[r].concat(i.call(arguments,1)))}});y(s,t,a,u,n,c||l)})};e.fn.off=function(t,n,i){var u=this;if(t&&!o(t)){e.each(t,function(e,t){u.off(e,n,t)});return u}!o(n)&&!s(i)&&i!==!1&&(i=n,n=r);i===!1&&(i=E);return u.each(function(){b(this,t,i,n)})};e.fn.trigger=function(t,n){t=o(t)||e.isPlainObject(t)?e.Event(t):T(t);t._args=n;return this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})};e.fn.triggerHandler=function(t,n){var r,i;this.each(function(s,u){r=N(o(t)?e.Event(t):t);r._args=n;r.target=u;e.each(p(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})});return i};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}});["focus","blur"].forEach(function(t){e.fn[t]=function(e){e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}});return this}});e.Event=function(e,t){o(e)||(t=e,e=t.type);var n=document.createEvent(a[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];n.initEvent(e,r,!0);return T(n)}})(Zepto);(function($){function triggerAndReturn(e,t,n){var r=$.Event(t);$(e).trigger(r,n);return!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t);r&&r.resolveWith(i,[e,s,t]);triggerGlobal(n,i,"ajaxSuccess",[t,n,e]);ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e);i&&i.rejectWith(s,[n,t,e]);triggerGlobal(r,s,"ajaxError",[n,r,e||t]);ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e);triggerGlobal(n,r,"ajaxComplete",[t,n]);ajaxStop(n)}function empty(){}function mimeToDataType(e){e&&(e=e.split(";",2)[0]);return e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional));e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){var i=!$.isFunction(t);return{url:e,data:i?t:undefined,success:i?$.isFunction(n)?n:undefined:t,dataType:i?r||n:n}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u);r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]");!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0;$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"jsonp"+ ++jsonpID,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;t&&t.promise(a);$(i).on("load error",function(n,u){clearTimeout(f);$(i).off().remove();n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t);window[r]=s;o&&$.isFunction(s)&&s(o[0]);s=o=undefined});if(ajaxBeforeSend(a,e)===!1){u("abort");return a}window[r]=function(){o=arguments};i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r);document.head.appendChild(i);e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout));return a}return $.ajax(e)};$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred();for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings);settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);settings.url||(settings.url=window.location.toString());serializeData(settings);settings.cache===!1&&(settings.url=appendQuery(settings.url,"_="+Date.now()));var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder){hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?"));return $.ajaxJSONP(settings,deferred)}var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr);settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest");setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime){mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]);xhr.overrideMimeType&&xhr.overrideMimeType(mime)}(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader;xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type"));result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings,deferred):ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1){xhr.abort();ajaxError(null,"abort",xhr,settings,deferred);return xhr}if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty;xhr.abort();ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout));xhr.send(settings.data?settings.data:null);return xhr};$.get=function(e,t,n,r){return $.ajax(parseArguments.apply(null,arguments))};$.post=function(e,t,n,r){var i=parseArguments.apply(null,arguments);i.type="POST";return $.ajax(i)};$.getJSON=function(e,t,n){var r=parseArguments.apply(null,arguments);r.dataType="json";return $.ajax(r)};$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;i.length>1&&(o.url=i[0],s=i[1]);o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e);u&&u.apply(r,arguments)};$.ajax(o);return this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];n.add=function(e,t){this.push(escape(e)+"="+escape(t))};serialize(n,e,t);return n.join("&").replace(/%20/g,"+")}})(Zepto);(function(e){e.fn.serializeArray=function(){var t=[],n;e([].slice.call(this.get(0).elements)).each(function(){n=e(this);var r=n.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:n.attr("name"),value:n.val()})});return t};e.fn.serialize=function(){var e=[];this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))});return e.join("&")};e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n);n.isDefaultPrevented()||this.get(0).submit()}return this}})(Zepto);(function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){t=t||[];e.extend(t,e.fn);t.selector=n||"";t.__Z=!0;return t},isZ:function(t){return e.type(t)==="array"&&"__Z"in t}});try{getComputedStyle(undefined)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}})(Zepto);VCO.getJSON=Zepto.getJSON;VCO.ajax=Zepto.ajax})(VCO);VCO.Class=function(){};VCO.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments)},n=function(){};n.prototype=this.prototype;var r=new n;r.constructor=t;t.prototype=r;t.superclass=this.prototype;for(var i in this)this.hasOwnProperty(i)&&i!=="prototype"&&i!=="superclass"&&(t[i]=this[i]);if(e.statics){VCO.Util.extend(t,e.statics);delete e.statics}if(e.includes){VCO.Util.extend.apply(null,[r].concat(e.includes));delete e.includes}e.options&&r.options&&(e.options=VCO.Util.extend({},r.options,e.options));VCO.Util.extend(r,e);t.extend=VCO.Class.extend;t.include=function(e){VCO.Util.extend(this.prototype,e)};return t};VCO.Events={addEventListener:function(e,t,n){var r=this._vco_events=this._vco_events||{};r[e]=r[e]||[];r[e].push({action:t,context:n||this});return this},hasEventListeners:function(e){var t="_vco_events";return t in this&&e in this[t]&&this[t][e].length>0},removeEventListener:function(e,t,n){if(!this.hasEventListeners(e))return this;for(var r=0,i=this._vco_events,s=i[e].length;r<s;r++)if(i[e][r].action===t&&(!n||i[e][r].context===n)){i[e].splice(r,1);return this}return this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var n=VCO.Util.extend({type:e,target:this},t),r=this._vco_events[e].slice();for(var i=0,s=r.length;i<s;i++)r[i].action.call(r[i].context||this,n);return this}};VCO.Events.on=VCO.Events.addEventListener;VCO.Events.off=VCO.Events.removeEventListener;VCO.Events.fire=VCO.Events.fireEvent;(function(){var e=navigator.userAgent.toLowerCase(),t=document.documentElement,n="ActiveXObject"in window,r=e.indexOf("webkit")!==-1,i=e.indexOf("phantom")!==-1,s=e.search("android [23]")!==-1,o=typeof orientation!="undefined",u=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent,a=window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints||u,f=n&&"transition"in t.style,l="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!s,c="MozPerspective"in t.style,h="OTransition"in t.style,p=window.opera,d="devicePixelRatio"in window&&window.devicePixelRatio>1;if(!d&&"matchMedia"in window){var v=window.matchMedia("(min-resolution:144dpi)");d=v&&v.matches}var m=!window.L_NO_TOUCH&&!i&&(a||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);VCO.Browser={ie:n,ielt9:n&&!document.addEventListener,webkit:r,firefox:e.indexOf("gecko")!==-1&&!r&&!window.opera&&!n,android:e.indexOf("android")!==-1,android23:s,chrome:e.indexOf("chrome")!==-1,ie3d:f,webkit3d:l,gecko3d:c,opera3d:h,any3d:!window.L_DISABLE_3D&&(f||l||c||h)&&!i,mobile:o,mobileWebkit:o&&r,mobileWebkit3d:o&&l,mobileOpera:o&&window.opera,touch:!!m,msPointer:!!u,pointer:!!a,retina:!!d,orientation:function(){var e=window.innerWidth,t=window.innerHeight,n="portrait";e>t&&(n="landscape");Math.abs(window.orientation)==90;trace(n);return n}}})();VCO.Load=function(e){function n(e){var n=0,r=!1;for(n=0;n<t.length;n++)t[n]==e&&(r=!0);if(r)return!0;t.push(e);return!1}var t=[];return{css:function(e,t,r,i){n(e)?t():VCO.LoadIt.css(e,t,r,i)},js:function(e,t,r,i){n(e)?t():VCO.LoadIt.js(e,t,r,i)}}}(this.document);VCO.LoadIt=function(e){function u(t,n){var r=e.createElement(t),i;for(i in n)n.hasOwnProperty(i)&&r.setAttribute
(i,n[i]);return r}function a(e){var t=r[e],n,o;if(t){n=t.callback;o=t.urls;o.shift();i=0;if(!o.length){n&&n.call(t.context,t.obj);r[e]=null;s[e].length&&l(e)}}}function f(){var n=navigator.userAgent;t={async:e.createElement("script").async===!0};(t.webkit=/AppleWebKit\//.test(n))||(t.ie=/MSIE/.test(n))||(t.opera=/Opera/.test(n))||(t.gecko=/Gecko\//.test(n))||(t.unknown=!0)}function l(i,o,l,p,d){var v=function(){a(i)},m=i==="css",g=[],y,b,w,E,S,x;t||f();if(o){o=typeof o=="string"?[o]:o.concat();if(m||t.async||t.gecko||t.opera)s[i].push({urls:o,callback:l,obj:p,context:d});else for(y=0,b=o.length;y<b;++y)s[i].push({urls:[o[y]],callback:y===b-1?l:null,obj:p,context:d})}if(r[i]||!(E=r[i]=s[i].shift()))return;n||(n=e.head||e.getElementsByTagName("head")[0]);S=E.urls;for(y=0,b=S.length;y<b;++y){x=S[y];if(m)w=t.gecko?u("style"):u("link",{href:x,rel:"stylesheet"});else{w=u("script",{src:x});w.async=!1}w.className="lazyload";w.setAttribute("charset","utf-8");if(t.ie&&!m)w.onreadystatechange=function(){if(/loaded|complete/.test(w.readyState)){w.onreadystatechange=null;v()}};else if(m&&(t.gecko||t.webkit))if(t.webkit){E.urls[y]=w.href;h()}else{w.innerHTML='@import "'+x+'";';c(w)}else w.onload=w.onerror=v;g.push(w)}for(y=0,b=g.length;y<b;++y)n.appendChild(g[y])}function c(e){var t;try{t=!!e.sheet.cssRules}catch(n){i+=1;i<200?setTimeout(function(){c(e)},50):t&&a("css");return}a("css")}function h(){var e=r.css,t;if(e){t=o.length;while(--t>=0)if(o[t].href===e.urls[0]){a("css");break}i+=1;e&&(i<200?setTimeout(h,50):a("css"))}}var t,n,r={},i=0,s={css:[],js:[]},o=e.styleSheets;return{css:function(e,t,n,r){l("css",e,t,n,r)},js:function(e,t,n,r){l("js",e,t,n,r)}}}(this.document);VCO.Language={name:"English",lang:"en",messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia"},buttons:{map_overview:"Map Overview",overview:"Overview",backtostart:"Back To Beginning",collapse_toggle:"Hide Map",uncollapse_toggle:"Show Map"}};VCO.Easings={ease:[.25,.1,.25,1],linear:[0,0,1,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[.42,0,.58,1]};VCO.Ease={KeySpline:function(e){function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,i,s){return((t(i,s)*e+n(i,s))*e+r(i))*e}function s(e,i,s){return 3*t(i,s)*e*e+2*n(i,s)*e+r(i)}function o(t){var n=t;for(var r=0;r<4;++r){var o=s(n,e[0],e[2]);if(o==0)return n;var u=i(n,e[0],e[2])-t;n-=u/o}return n}this.get=function(t){return e[0]==e[1]&&e[2]==e[3]?t:i(o(t),e[1],e[3])}},easeInSpline:function(e){var t=new VCO.Ease.KeySpline(VCO.Easings.easein);return t.get(e)},easeInOutExpo:function(e){var t=new VCO.Ease.KeySpline(VCO.Easings.easein);return t.get(e)},easeOut:function(e){return Math.sin(e*Math.PI/2)},easeOutStrong:function(e){return e==1?1:1-Math.pow(2,-10*e)},easeIn:function(e){return e*e},easeInStrong:function(e){return e==0?0:Math.pow(2,10*(e-1))},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((e*6-1)*2*Math.PI/2)+1},spring:function(e){return 1-Math.cos(e*4.5*Math.PI)*Math.exp(-e*6)},blink:function(e,t){return Math.round(e*(t||5))%2},pulse:function(e,t){return-Math.cos(e*((t||5)-.5)*2*Math.PI)/2+.5},wobble:function(e){return-Math.cos(e*Math.PI*9*e)/2+.5},sinusoidal:function(e){return-Math.cos(e*Math.PI)/2+.5},flicker:function(e){var e=e+(Math.random()-.5)/5;return easings.sinusoidal(e<0?0:e>1?1:e)},mirror:function(e){return e<.5?easings.sinusoidal(e*2):easings.sinusoidal(1-(e-.5)*2)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+ --e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};VCO.Animate=function(e,t){var n=new vcoanimate(e,t),r;return n};!function(e,t){typeof define=="function"?define(t):typeof module!="undefined"?module.exports=t():this[e]=t()}("vcoanimate",function(){function E(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t);for(n=0;n<e.length;++n)if(e[n]===t)return n}function S(e){var t,n=w.length;r&&e>1e12&&(e=i());o&&(e=i());for(t=n;t--;)w[t](e);w.length&&b(S)}function x(e){w.push(e)===1&&b(S)}function T(e){var t,n=E(w,e);if(n>=0){t=w.slice(n+1);w.length=n;w=w.concat(t)}}function N(e,t){var n={},r;if(r=e.match(c))n.rotate=B(r[1],t?t.rotate:null);if(r=e.match(h))n.scale=B(r[1],t?t.scale:null);if(r=e.match(p)){n.skewx=B(r[1],t?t.skewx:null);n.skewy=B(r[3],t?t.skewy:null)}if(r=e.match(d)){n.translatex=B(r[1],t?t.translatex:null);n.translatey=B(r[3],t?t.translatey:null)}return n}function C(e){var t="";"rotate"in e&&(t+="rotate("+e.rotate+"deg) ");"scale"in e&&(t+="scale("+e.scale+") ");"translatex"in e&&(t+="translate("+e.translatex+"px,"+e.translatey+"px) ");"skewx"in e&&(t+="skew("+e.skewx+"deg,"+e.skewy+"deg)");return t}function k(e,t,n){return"#"+(1<<24|e<<16|t<<8|n).toString(16).slice(1)}function L(e){var t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(t?k(t[1],t[2],t[3]):e).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function A(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function O(e){return typeof e=="function"}function M(e){return Math.sin(e*Math.PI/2)}function _(e,t,n,r,s,o){function d(e){var i=e-c;if(i>a||h){o=isFinite(o)?o:1;h?p&&t(o):t(o);T(d);return n&&n.apply(f)}isFinite(o)?t(l*r(i/a)+s):t(r(i/a))}r=O(r)?r:j.easings[r]||M;var a=e||u,f=this,l=o-s,c=i(),h=0,p=0;x(d);return{stop:function(e){h=1;p=e;e||(n=null)}}}function D(e,t){var n=e.length,r=[],i,s;for(i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(s=1;s<n;++s)for(i=0;i<n-s;++i){r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0];r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1]}return[r[0][0],r[0][1]]}function P(e,t,n){var r=[],i,s,o,u;for(i=0;i<6;i++){o=Math.min(15,parseInt(t.charAt(i),16));u=Math.min(15,parseInt(n.charAt(i),16));s=Math.floor((u-o)*e+o);s=s>15?15:s<0?0:s;r[i]=s.toString(16)}return"#"+r.join("")}function H(e,t,n,r,i,s,o){if(i=="transform"){o={};for(var a in n[s][i])o[a]=a in r[s][i]?Math.round(((r[s][i][a]-n[s][i][a])*e+n[s][i][a])*u)/u:n[s][i][a];return o}if(typeof n[s][i]=="string")return P(e,n[s][i],r[s][i]);o=Math.round(((r[s][i]-n[s][i])*e+n[s][i])*u)/u;i in v||(o+=t[s][i]||"px");return o}function B(e,t,n,r,i){return(n=f.exec(e))?(i=parseFloat(n[2]))&&t+(n[1]=="+"?1:-1)*i:parseFloat(e)}function j(e,t){var n=e?n=isFinite(e.length)?e:[e]:[],r,i=t.complete,s=t.duration,o=t.easing,u=t.bezier,f=[],c=[],h=[],p=[],d,v;if(u){d=t.left;v=t.top;delete t.right;delete t.bottom;delete t.left;delete t.top}for(r=n.length;r--;){f[r]={};c[r]={};h[r]={};if(u){var b=y(n[r],"left"),w=y(n[r],"top"),E=[B(O(d)?d(n[r]):d||0,parseFloat(b)),B(O(v)?v(n[r]):v||0,parseFloat(w))];p[r]=O(u)?u(n[r],E):u;p[r].push(E);p[r].unshift([parseInt(b,10),parseInt(w,10)])}for(var S in t){switch(S){case"complete":case"duration":case"easing":case"bezier":continue}var x=y(n[r],S),T,k=O(t[S])?t[S](n[r]):t[S];if(typeof k=="string"&&a.test(k)&&!a.test(x)){delete t[S];continue}f[r][S]=S=="transform"?N(x):typeof k=="string"&&a.test(k)?L(x).slice(1):parseFloat(x);c[r][S]=S=="transform"?N(k,f[r][S]):typeof k=="string"&&k.charAt(0)=="#"?L(k).slice(1):B(k,parseFloat(x));typeof k=="string"&&(T=k.match(l))&&(h[r][S]=T[1])}}return _.apply(n,[s,function(e,i,s){for(r=n.length;r--;){if(u){s=D(p[r],e);n[r].style.left=s[0]+"px";n[r].style.top=s[1]+"px"}for(var o in t){i=H(e,h,f,c,o,r);o=="transform"?n[r].style[m]=C(i):o=="opacity"&&!g?n[r].style.filter="alpha(opacity="+i*100+")":n[r].style[A(o)]=i}}},i,o])}var e=document,t=window,n=t.performance,r=n&&(n.now||n.webkitNow||n.msNow||n.mozNow),i=r?function(){return r.call(n)}:function(){return+(new Date)},s=e.documentElement,o=!1,u=1e3,a=/^rgb\(|#/,f=/^([+\-])=([\d\.]+)/,l=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,c=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,h=/scale\(((?:[+\-]=)?([\d\.]+))\)/,p=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,d=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,v={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},m=function(){var t=e.createElement("a").style,n=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],r;for(r=0;r<n.length;r++)if(n[r]in t)return n[r]}(),g=function(){return typeof e.createElement("a").style.opacity!="undefined"}(),y=e.defaultView&&e.defaultView.getComputedStyle?function(t,n){n=n=="transform"?m:n;n=A(n);var r=null,i=e.defaultView.getComputedStyle(t,"");i&&(r=i[n]);return t.style[n]||r}:s.currentStyle?function(e,t){t=A(t);if(t=="opacity"){var n=100;try{n=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(r){try{n=e.filters("alpha").opacity}catch(i){}}return n/100}var s=e.currentStyle?e.currentStyle[t]:null;return e.style[t]||s}:function(e,t){return e.style[A(t)]},b=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(e){t.setTimeout(function(){e(+(new Date))},17)}}(),w=[];b(function(e){o=e>1e12!=i()>1e12});j.tween=_;j.getStyle=y;j.bezier=D;j.transform=m;j.parseTransform=N;j.formatTransform=C;j.easings={};return j});VCO.Point=function(e,t,n){this.x=n?Math.round(e):e;this.y=n?Math.round(t):t};VCO.Point.prototype={add:function(e){return this.clone()._add(e)},_add:function(e){this.x+=e.x;this.y+=e.y;return this},subtract:function(e){return this.clone()._subtract(e)},_subtract:function(e){this.x-=e.x;this.y-=e.y;return this},divideBy:function(e,t){return new VCO.Point(this.x/e,this.y/e,t)},multiplyBy:function(e){return new VCO.Point(this.x*e,this.y*e)},distanceTo:function(e){var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},clone:function(){return new VCO.Point(this.x,this.y)},toString:function(){return"Point("+VCO.Util.formatNum(this.x)+", "+VCO.Util.formatNum(this.y)+")"}};VCO.DomMixins={show:function(e){e||(this._el.container.style.display="block")},hide:function(e){this._el.container.style.display="none"},addTo:function(e){e.appendChild(this._el.container);this.onAdd()},removeFrom:function(e){e.removeChild(this._el.container);this.onRemove()},animatePosition:function(e,t){var n={duration:this.options.duration,easing:this.options.ease};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]+"px");this.animator&&this.animator.stop();this.animator=VCO.Animate(t,n)},onLoaded:function(){this.fire("loaded",this.data)},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},setPosition:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t?t.style[n]=e[n]+"px":this._el.container.style[n]=e[n]+"px")},getPosition:function(){return VCO.Dom.getPosition(this._el.container)}};VCO.Dom={get:function(e){return typeof e=="string"?document.getElementById(e):e},getByClass:function(e){if(e)return document.getElementsByClassName(e)},create:function(e,t,n){var r=document.createElement(e);r.className=t;n&&n.appendChild(r);return r},createText:function(e,t){var n=document.createTextNode(e);t&&t.appendChild(n);return n},getTranslateString:function(e){return VCO.Dom.TRANSLATE_OPEN+e.x+"px,"+e.y+"px"+VCO.Dom.TRANSLATE_CLOSE},setPosition:function(e,t){e._vco_pos=t;if(VCO.Browser.webkit3d){e.style[VCO.Dom.TRANSFORM]=VCO.Dom.getTranslateString(t);if(VCO.Browser.android){e.style["-webkit-perspective"]="1000";e.style["-webkit-backface-visibility"]="hidden"}}else{e.style.left=t.x+"px";e.style.top=t.y+"px"}},getPosition:function(e){var t={x:0,y:0};while(e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop)){t.x+=e.offsetLeft;t.y+=e.offsetTop;e=e.offsetParent}return t},testProp:function(e){var t=document.documentElement.style;for(var n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}};VCO.Util.extend(VCO.Dom,{TRANSITION:VCO.Dom.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:VCO.Dom.testProp(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),TRANSLATE_OPEN:"translate"+(VCO.Browser.webkit3d?"3d(":"("),TRANSLATE_CLOSE:VCO.Browser.webkit3d?",0)":")"});VCO.DomUtil={get:function(e){return typeof e=="string"?document.getElementById(e):e},getStyle:function(e,t){var n=e.style[t];!n&&e.currentStyle&&(n=e.currentStyle[t]);if(!n||n==="auto"){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return n==="auto"?null:n},getViewportOffset:function(e){var t=0,n=0,r=e,i=document.body;do{t+=r.offsetTop||0;n+=r.offsetLeft||0;if(r.offsetParent===i&&VCO.DomUtil.getStyle(r,"position")==="absolute")break;r=r.offsetParent}while(r);r=e;do{if(r===i)break;t-=r.scrollTop||0;n-=r.scrollLeft||0;r=r.parentNode}while(r);return new VCO.Point(n,t)},create:function(e,t,n){var r=document.createElement(e);r.className=t;n&&n.appendChild(r);return r},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty();if(!this._onselectstart){this._onselectstart=document.onselectstart;document.onselectstart=VCO.Util.falseFn}},enableTextSelection:function(){document.onselectstart=this._onselectstart;this._onselectstart=null},hasClass:function(e,t){return e.className.length>0&&(new RegExp("(^|\\s)"+t+"(\\s|$)")).test(e.className)},addClass:function(e,t){VCO.DomUtil.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},removeClass:function(e,t){e.className=e.className.replace(/(\S+)\s*/g,function(e,n){return n===t?"":e}).replace(/^\s+/,"")},setOpacity:function(e,t){VCO.Browser.ie?e.style.filter="alpha(opacity="+Math.round(t*100)+")":e.style.opacity=t},testProp:function(e){var t=document.documentElement.style;for(var n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1},getTranslateString:function(e){return VCO.DomUtil.TRANSLATE_OPEN+e.x+"px,"+e.y+"px"+VCO.DomUtil.TRANSLATE_CLOSE},getScaleString:function(e,t){var n=VCO.DomUtil.getTranslateString(t),r=" scale("+e+") ",i=VCO.DomUtil.getTranslateString(t.multiplyBy(-1));return n+r+i},setPosition:function(e,t){e._vco_pos=t;if(VCO.Browser.webkit3d){e.style[VCO.DomUtil.TRANSFORM]=VCO.DomUtil.getTranslateString(t);if(VCO.Browser.android){e.style["-webkit-perspective"]="1000";e.style["-webkit-backface-visibility"]="hidden"}}else{e.style.left=t.x+"px";e.style.top=t.y+"px"}},getPosition:function(e){return e._vco_pos}};VCO.DomEvent={addListener:function(e,t,n,r){var i=VCO.Util.stamp(n),s="_vco_"+t+i;if(e[s])return;var o=function(t){return n.call(r||e,t||VCO.DomEvent._getEvent())};if(VCO.Browser.touch&&t==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(e,o,i);else if("addEventListener"in e)if(t==="mousewheel"){e.addEventListener("DOMMouseScroll",o,!1);e.addEventListener(t,o,!1)}else if(t==="mouseenter"||t==="mouseleave"){var u=o,a=t==="mouseenter"?"mouseover":"mouseout";o=function(t){if(!VCO.DomEvent._checkMouse(e,t))return;return u(t)};e.addEventListener(a,o,!1)}else e.addEventListener(t,o,!1);else"attachEvent"in e&&e.attachEvent("on"+t,o);e[s]=o},removeListener:function(e,t,n){var r=VCO.Util.stamp(n),i="_vco_"+t+r,s=e[i];if(!s)return;if(VCO.Browser.touch&&t==="dblclick"&&this.removeDoubleTapListener)this.removeDoubleTapListener(e,r);else if("removeEventListener"in e)if(t==="mousewheel"){e.removeEventListener("DOMMouseScroll",s,!1);e.removeEventListener(t,s,!1)}else t==="mouseenter"||t==="mouseleave"?e.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",s,!1):e.removeEventListener(t,s,!1);else"detachEvent"in e&&e.detachEvent("on"+t,s);e[i]=null},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{while(n&&n!==e)n=n.parentNode}catch(r){return!1}return n!==e},_getEvent:function(){var e=window.event;if(!e){var t=arguments.callee.caller;while(t){e=t.arguments[0];if(e&&window.Event===e.constructor)break;t=t.caller}}return e},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},disableClickPropagation:function(e){VCO.DomEvent.addListener(e,VCO.Draggable.START,VCO.DomEvent.stopPropagation);VCO.DomEvent.addListener(e,"click",VCO.DomEvent.stopPropagation);VCO.DomEvent.addListener(e,"dblclick",VCO.DomEvent.stopPropagation)},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stop:function(e){VCO.DomEvent.preventDefault(e);VCO.DomEvent.stopPropagation(e)},getWheelDelta:function(e){var t=0;e.wheelDelta&&(t=e.wheelDelta/120);e.detail&&(t=-e.detail/3);return t}};VCO.Draggable=VCO.Class.extend({includes:VCO.Events,_el:{},mousedrag:{down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},touchdrag:{down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},initialize:function(e,t,n){this._el={drag:e,move:e};n&&(this._el.move=n);this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:VCO.Ease.easeInOutQuint};this.animator=null;this.dragevent=this.mousedrag;VCO.Browser.touch&&(this.dragevent=this.touchdrag);this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1};VCO.Util.mergeData(this.options,t)},enable:function(e){this.data.pos.start=0;this._el.move.style.left=this.data.pos.start.x+"px";this._el.move.style.top=this.data.pos.start.y+"px";this._el.move.style.position="absolute"},disable:function(){VCO.DomEvent.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this);VCO.DomEvent.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)},stopMomentum:function(){this.animator&&this.animator.stop()},updateConstraint:function(e){this.options.constraint=e},_onDragStart:function(e){if(VCO.Browser.touch)if(e.originalEvent){this.data.pagex.start=e.originalEvent.touches[0].screenX;this.data.pagey.start=e.originalEvent.touches[0].screenY}else{this.data.pagex.start=e.targetTouches[0].screenX;this.data.pagey.start=e.targetTouches[0].screenY}else{this.data.pagex.start=e.pageX;this.data.pagey.start=e.pageY}this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px");this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px");this.data.pos.start=VCO.Dom.getPosition(this._el.drag);this.data.time.start=(new Date).getTime();this.fire("dragstart",this.data);VCO.DomEvent.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this);VCO.DomEvent.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)},_onDragEnd:function(e){this.data.sliding=!1;VCO.DomEvent.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this);VCO.DomEvent.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this);this.fire("dragend",this.data);this._momentum()},_onDragMove:function(e){e.preventDefault();this.data.sliding=!0;if(VCO.Browser.touch)if(e.originalEvent){this.data.pagex.end=e.originalEvent.touches[0].screenX;this.data.pagey.end=e.originalEvent.touches[0].screenY}else{this.data.pagex.end=e.targetTouches[0].screenX;this.data.pagey.end=e.targetTouches[0].screenY}else{this.data.pagex.end=e.pageX;this.data.pagey.end=e.pageY}this.data.pos.end=VCO.Dom.getPosition(this._el.drag);this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x);this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y);this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px");this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px");this.fire("dragmove",this.data)},_momentum:function(){var e={x:0,y:0,time:0},t={x:0,y:0,time:0},n=!1,r="";VCO.Browser.touch;e.time=((new Date).getTime()-this.data.time.start)*10;t.time=((new Date).getTime()-this.data.time.start)*10;t.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start));t.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start));e.x=Math.round(t.x/t.time);e.y=Math.round(t.y/t.time);this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x);this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y);this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x;this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y;t.time<3e3&&(n=!0);if(Math.abs(t.x)>1e4){this.data.direction="left";t.x>0&&(this.data.direction="right")}if(Math.abs(t.y)>1e4){this.data.direction="up";t.y>0&&(this.data.direction="down")}this._animateMomentum();n&&this.fire("swipe_"+this.data.direction,this.data)},_animateMomentum:function(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},t={duration:this.options.duration,easing:VCO.Ease.easeOutStrong};if(this.options.enable.y){if(this.options.constraint.top||this.options.constraint.bottom)e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top);t.top=Math.floor(e.y)+"px"}if(this.options.enable.x){if(this.options.constraint.left||this.options.constraint.right)e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right);t.left=Math.floor(e.x)+"px"}this.animator=VCO.Animate(this._el.move,t);this.fire("momentum",this.data)}});VCO.Swipable=VCO.Class.extend({includes:VCO.Events,_el:{},mousedrag:{down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},touchdrag:{down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},initialize:function(e,t,n){this._el={drag:e,move:e};t&&(this._el.move=t);this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:VCO.Ease.easeInOutQuint};this.animator=null;this.dragevent=this.mousedrag;VCO.Browser.touch&&(this.dragevent=this.touchdrag);this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1};VCO.Util.mergeData(this.options,n)},enable:function(e){VCO.DomEvent.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this);VCO.DomEvent.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this);this.data.pos.start=0;this._el.move.style.left=this.data.pos.start.x+"px";this._el.move.style.top=this.data.pos.start.y+"px";this._el.move.style.position="absolute"},disable:function(){VCO.DomEvent.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this);VCO.DomEvent.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)},stopMomentum:function(){this.animator&&this.animator.stop()},updateConstraint:function(e){this.options.constraint=e},_onDragStart:function(e){this.animator&&this.animator.stop();if(VCO.Browser.touch)if(e.originalEvent){this.data.pagex.start=e.originalEvent.touches[0].screenX;this.data.pagey.start=e.originalEvent.touches[0].screenY}else{this.data.pagex.start=e.targetTouches[0].screenX;this.data.pagey.start=e.targetTouches[0].screenY}else{this.data.pagex.start=e.pageX;this.data.pagey.start=e.pageY}this.options.enable.x;this.options.enable.y;this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop};this.data.time.start=(new Date).getTime();this.fire("dragstart",this.data);VCO.DomEvent.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this);VCO.DomEvent.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)},_onDragEnd:function(e){this.data.sliding=!1;VCO.DomEvent.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this);VCO.DomEvent.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this);this.fire("dragend",this.data);this._momentum()},_onDragMove:function(e){var t={x:0,y:0};this.data.sliding=!0;if(VCO.Browser.touch)if(e.originalEvent){this.data.pagex.end=e.originalEvent.touches[0].screenX;this.data.pagey.end=e.originalEvent.touches[0].screenY}else{this.data.pagex.end=e.targetTouches[0].screenX;this.data.pagey.end=e.targetTouches[0].screenY}else{this.data.pagex.end=e.pageX;this.data.pagey.end=e.pageY}t.x=this.data.pagex.start-this.data.pagex.end;t.y=this.data.pagey.start-this.data.pagey.end;this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop};this.data.new_pos.x=-(t.x-this.data.pos.start.x);this.data.new_pos.y=-(t.y-this.data.pos.start.y);if(this.options.enable.x&&Math.abs(t.x)>Math.abs(t.y)){e.preventDefault();this._el.move.style.left=this.data.new_pos.x+"px"}if(this.options.enable.y&&Math.abs(t.y)>Math.abs(t.y)){e.preventDefault();this._el.move.style.top=this.data.new_pos.y+"px"}this.fire("dragmove",this.data)},_momentum:function(){var e={x:0,y:0,time:0},t={x:0,y:0,time:0},n={x:!1,y:!1},r=!1,i="";this.data.direction=null;e.time=((new Date).getTime()-this.data.time.start)*10;t.time=((new Date).getTime()-this.data.time.start)*10;t.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start));t.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start));e.x=Math.round(t.x/t.time);e.y=Math.round(t.y/t.time);this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x);this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y);this.options.enable.x?this.data.new_pos.x>0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x;this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y;t.time<2e3&&(r=!0);this.options.enable.x&&this.options.enable.y?Math.abs(t.x)>Math.abs(t.y)?n.x=!0:n.y=!0:this.options.enable.x?Math.abs(t.x)>Math.abs(t.y)&&(n.x=!0):Math.abs(t.y)>Math.abs(t.x)&&(n.y=!0);if(n.x){Math.abs(t.x)>this._el.drag.offsetWidth/2&&(r=!0);if(Math.abs(t.x)>1e4){this.data.direction="left";t.x>0&&(this.data.direction="right")}}if(n.y){Math.abs(t.y)>this._el.drag.offsetHeight/2&&(r=!0);if(Math.abs(t.y)>1e4){this.data.direction="up";t.y>0&&(this.data.direction="down")}}this._animateMomentum();if(r&&this.data.direction)this.fire("swipe_"+this.data.direction,this.data);else if(this.data.direction)this.fire("swipe_nodirection",this.data);else if(this.options.snap){this.animator.stop();this.animator=VCO.Animate(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:VCO.Ease.easeOutStrong})}},_animateMomentum:function(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},t={duration:this.options.duration,easing:VCO.Ease.easeOutStrong};if(this.options.enable.y){if(this.options.constraint.top||this.options.constraint.bottom)e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top);t.top=Math.floor(e.y)+"px"}if(this.options.enable.x){if(this.options.constraint.left||this.options.constraint.right)e.x>=this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right);t.left=Math.floor(e.x)+"px"}this.animator=VCO.Animate(this._el.move,t);this.fire("momentum",this.data)}});VCO.MenuBar=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(e,t,n){this._el={parent:{},container:{},button_overview:{},button_backtostart:{},button_collapse_toggle:{},arrow:{},line:{},coverbar:{},grip:{}};this.collapsed=!1;typeof e=="object"?this._el.container=e:this._el.container=VCO.Dom.get(e);t&&(this._el.parent=t);this.options={width:600,height:600,duration:1e3,ease:VCO.Ease.easeInOutQuint,menubar_default_y:0};this.animator={};VCO.Util.mergeData(this.options,n);this._initLayout();this._initEvents()},show:function(e){var t=this.options.duration;e&&(t=e)},hide:function(e){},setSticky:function(e){this.options.menubar_default_y=e},setColor:function(e){e?this._el.container.className="vco-menubar vco-menubar-inverted":this._el.container.className="vco-menubar"},updateDisplay:function(e,t,n,r){this._updateDisplay(e,t,n,r)},_onButtonOverview:function(e){this.fire("overview",e)},_onButtonBackToStart:function(e){this.fire("back_to_start",e)},_onButtonCollapseMap:function(e){if(this.collapsed){this.collapsed=!1;this.show();this._el.button_overview.style.display="inline";this.fire("collapse",{y:this.options.menubar_default_y});VCO.Browser.mobile?this._el.button_collapse_toggle.innerHTML="<span class='vco-icon-arrow-up'></span>":this._el.button_collapse_toggle.innerHTML=VCO.Language.buttons.collapse_toggle+"<span class='vco-icon-arrow-up'></span>"}else{this.collapsed=!0;this.hide(25);this._el.button_overview.style.display="none";this.fire("collapse",{y:1});VCO.Browser.mobile?this._el.button_collapse_toggle.innerHTML="<span class='vco-icon-arrow-down'></span>":this._el.button_collapse_toggle.innerHTML=VCO.Language.buttons.uncollapse_toggle+"<span class='vco-icon-arrow-down'></span>"}},_initLayout:function(){this._el.button_overview=VCO.Dom.create("span","vco-menubar-button",this._el.container);VCO.DomEvent.addListener(this._el.button_overview,"click",this._onButtonOverview,this);this._el.button_backtostart=VCO.Dom.create("span","vco-menubar-button",this._el.container);VCO.DomEvent.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this);this._el.button_collapse_toggle=VCO.Dom.create("span","vco-menubar-button",this._el.container);VCO.DomEvent.addListener(this._el.button_collapse_toggle,"click",this._onButtonCollapseMap,this);this.options.map_as_image?this._el.button_overview.innerHTML=VCO.Language.buttons.overview:this._el.button_overview.innerHTML=VCO.Language.buttons.map_overview;if(VCO.Browser.mobile){this._el.button_backtostart.innerHTML="<span class='vco-icon-goback'></span>";this._el.button_collapse_toggle.innerHTML="<span class='vco-icon-arrow-up'></span>";this._el.container.setAttribute("ontouchstart"," ")}else{this._el.button_backtostart.innerHTML=VCO.Language.buttons.backtostart+" <span class='vco-icon-goback'></span>";this._el.button_collapse_toggle.innerHTML=VCO.Language.buttons.collapse_toggle+"<span class='vco-icon-arrow-up'></span>"}this.options.layout=="landscape"&&(this._el.button_collapse_toggle.style.display="none")},_initEvents:function(){},_updateDisplay:function(e,t,n){e&&(this.options.width=e);t&&(this.options.height=t)}});VCO.Message=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(e,t,n){this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}};this.options={width:600,height:600,message_class:"vco-message",message_icon_class:"vco-loading-icon"};VCO.Util.mergeData(this.data,e);VCO.Util.mergeData(this.options,t);this._el.container=VCO.Dom.create("div",this.options.message_class);if(n){n.appendChild(this._el.container);this._el.parent=n}this.animator={};this._initLayout();this._initEvents()},updateMessage:function(e){this._updateMessage(e)},updateDisplay:function(e,t){this._updateDisplay(e,t)},_updateMessage:function(e){e?this._el.message.innerHTML=e:VCO.Language?this._el.message.innerHTML=VCO.Language.messages.loading:this._el.message.innerHTML="Loading"},_onMouseClick:function(){this.fire("clicked",this.options)},_initLayout:function(){this._el.message_container=VCO.Dom.create("div","vco-message-container",this._el.container);this._el.loading_icon=VCO.Dom.create("div",this.options.message_icon_class,this._el.message_container);this._el.message=VCO.Dom.create("div","vco-message-content",this._el.message_container);this._updateMessage()},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMouseClick,this)},_updateDisplay:function(e,t,n){}});VCO.MediaType=function(e){var t={},n=[{type:"youtube",name:"YouTube",match_str:"(www.)?youtube|youtu.be",cls:VCO.Media.YouTube},{type:"vimeo",name:"Vimeo",match_str:"(player.)?vimeo.com",cls:VCO.Media.Vimeo},{type:"dailymotion",name
:"DailyMotion",match_str:"(www.)?dailymotion.com",cls:VCO.Media.DailyMotion},{type:"vine",name:"Vine",match_str:"(www.)?vine.co",cls:VCO.Media.Vine},{type:"soundcloud",name:"SoundCloud",match_str:"(player.)?soundcloud.com",cls:VCO.Media.SoundCloud},{type:"twitter",name:"Twitter",match_str:"(www.)?twitter.com",cls:VCO.Media.Twitter},{type:"googlemaps",name:"Google Map",match_str:"maps.google",cls:VCO.Media.Map},{type:"googleplus",name:"Google+",match_str:"plus.google",cls:VCO.Media.GooglePlus},{type:"flickr",name:"Flickr",match_str:"flickr.com/photos",cls:VCO.Media.Flickr},{type:"instagram",name:"Instagram",match_str:/(instagr.am|instagram.com)\/p/,cls:VCO.Media.Instagram},{type:"image",name:"Image",match_str:/jpg|jpeg|png|gif/i,cls:VCO.Media.Image},{type:"googledocs",name:"Google Doc",match_str:/\b.(doc|docx|xls|xlsx|ppt|pptx|pdf|pages|ai|psd|tiff|dxf|svg|eps|ps|ttf|xps|zip|tif)\b/,cls:VCO.Media.GoogleDoc},{type:"wikipedia",name:"Wikipedia",match_str:"(www.)?wikipedia.org",cls:VCO.Media.Wikipedia},{type:"iframe",name:"iFrame",match_str:"iframe",cls:VCO.Media.IFrame},{type:"storify",name:"Storify",match_str:"storify",cls:VCO.Media.Storify},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:VCO.Media.Blockquote},{type:"website",name:"Website",match_str:"http://",cls:VCO.Media.Website},{type:"",name:"",match_str:"",cls:VCO.Media}];for(var r=0;r<n.length;r++){if(e instanceof Array)return t={type:"slider",cls:VCO.Media.Slider};if(e.url.match(n[r].match_str)){t=n[r];t.url=e.url;return t}}return!1};VCO.Media=VCO.Class.extend({includes:[VCO.Events],_el:{},initialize:function(e,t,n){this._el={container:{},content_container:{},content:{},content_item:{},caption:null,credit:null,parent:{},link:null};this.player=null;this.timer=null;this.load_timer=null;this.message=null;this.media_id=null;this._state={loaded:!1};this.data={uniqueid:null,url:null,credit:null,caption:null,link:null,link_target:null};this.options={api_key_flickr:"f2cc870b4d233dd0a5bfe73fd0d64ef0",credit_height:0,caption_height:0};this.animator={};VCO.Util.mergeData(this.options,t);VCO.Util.mergeData(this.data,e);this._el.container=VCO.Dom.create("div","vco-media");this._el.container.id=this.data.uniqueid;this._initLayout();if(n){n.appendChild(this._el.container);this._el.parent=n}},loadMedia:function(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e._loadMedia();e._state.loaded=!0;e._updateDisplay()},1200)}catch(t){trace("Error loading media for ",this._media);trace(t)}},updateMediaDisplay:function(e){if(this._state.loaded){this._updateMediaDisplay(e);this._el.content_item.style.maxHeight=this.options.height/2+"px";VCO.Browser.firefox&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight&&(this._el.content_item.style.width="100%")}},_loadMedia:function(){},_updateMediaDisplay:function(e){},show:function(){},hide:function(){},addTo:function(e){e.appendChild(this._el.container);this.onAdd()},removeFrom:function(e){e.removeChild(this._el.container);this.onRemove()},updateDisplay:function(e,t,n){this._updateDisplay(e,t,n)},stopMedia:function(){this._stopMedia()},loadErrorDisplay:function(e){this._el.content.removeChild(this._el.content_item);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-loaderror",this._el.content);this._el.content_item.innerHTML=e+"<br/><span class='vco-icon-"+this.options.media_type+"'></span>";this.message&&this.message.hide()},onLoaded:function(){this._state.loaded=!0;this.fire("loaded",this.data);this.message&&this.message.hide();this.showMeta();this.updateDisplay()},showMeta:function(){if(this.data.credit&&this.data.credit!=""){this._el.credit=VCO.Dom.create("div","vco-credit",this._el.content_container);this._el.credit.innerHTML=this.data.credit;this.options.credit_height=this._el.credit.offsetHeight}if(this.data.caption&&this.data.caption!=""){this._el.caption=VCO.Dom.create("div","vco-caption",this._el.content_container);this._el.caption.innerHTML=this.data.caption;this.options.caption_height=this._el.caption.offsetHeight}},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},_initLayout:function(){this.message=new VCO.Message({},this.options);this.message.addTo(this._el.container);this._el.content_container=VCO.Dom.create("div","vco-media-content-container",this._el.container);if(this.data.link&&this.data.link!=""){this._el.link=VCO.Dom.create("a","vco-media-link",this._el.content_container);this._el.link.href=this.data.link;this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank";this._el.content=VCO.Dom.create("div","vco-media-content",this._el.link)}else this._el.content=VCO.Dom.create("div","vco-media-content",this._el.content_container)},_updateDisplay:function(e,t,n){e&&(this.options.width=e);t&&(this.options.height=t);n&&(this.options.layout=n);this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight);this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5);this.updateMediaDisplay(this.options.layout)},_stopMedia:function(){}});VCO.Media.Blockquote=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-blockquote",this._el.content);this.media_id=this.data.url;this._el.content_item.innerHTML=this.media_id;this.onLoaded()},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}});VCO.Media.Flickr=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-flickr vco-media-shadow",this._el.content);this.establishMediaID();e="http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?";VCO.getJSON(e,function(e){e.stat=="ok"?t.createMedia(e):t.loadErrorDisplay("Photo not found or private.")})},establishMediaID:function(){var e="flickr.com/photos/",t=this.data.url.indexOf(e);if(t==-1)throw"Invalid Flickr URL";var n=t+e.length;this.media_id=this.data.url.substr(n).split("/")[1]},createMedia:function(e){var t=this.sizes(this.options.height),n=e.sizes.size[e.sizes.size.length-2].source;for(var r=0;r<e.sizes.size.length;r++)e.sizes.size[r].label==t&&(n=e.sizes.size[r].source);this._el.content_item.src=n;this.onLoaded()},sizes:function(e){var t="";e<=75?e<=0?t="Large":t="Thumbnail":e<=180?t="Small":e<=240?t="Small 320":e<=375?t="Medium":e<=480?t="Medium 640":e<=600?t="Large":t="Large";return t}});VCO.Media.Instagram=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this.media_id=this.data.url.split("/p/")[1].split("/")[0];this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-instagram vco-media-shadow",this._el.content);this._el.content_item.src="http://instagr.am/p/"+this.media_id+"/media/?size="+this.sizes(this._el.content.offsetWidth);this.onLoaded()},sizes:function(e){var t="";e<=150?t="t":e<=306?t="m":t="l";return t}});VCO.Media.GoogleDoc=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe",this._el.content);this.media_id=this.data.url;e=this.media_id;this.media_id.match(/docs.google.com/i)?this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+this.media_id+"&amp;embedded=true'></iframe>":this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='http://docs.google.com/viewer?url="+this.media_id+"&amp;embedded=true'></iframe>";this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}});VCO.Media.GooglePlus=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-googleplus",this._el.content);this.media_id=this.data.url;e=this.media_id;this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>";this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}});VCO.Media.IFrame=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe",this._el.content);this.media_id=this.data.url;e=this.media_id;this._el.content_item.innerHTML=e;this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}});VCO.Media.Image=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image vco-media-shadow",this._el.content);this._el.content_item.src=this.data.url;this.onLoaded()},_updateMediaDisplay:function(e){VCO.Browser.firefox&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}});VCO.Media.SoundCloud=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-soundcloud vco-media-shadow",this._el.content);this.media_id=this.data.url;e="http://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?";VCO.getJSON(e,function(e){t.createMedia(e)})},createMedia:function(e){this._el.content_item.innerHTML=e.html;this.onLoaded()}});VCO.Media.Storify=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-storify",this._el.content);this.media_id=this.data.url;e="<iframe frameborder='0' width='100%' height='100%' src='"+this.media_id+"/embed'></iframe>";e+="<script src='"+this.media_id+".js'></script>";this._el.content_item.innerHTML=e;this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=this.options.height+"px"}});VCO.Media.Text=VCO.Class.extend({includes:[VCO.Events],_el:{container:{},content_container:{},content:{},headline:{}},data:{uniqueid:"",headline:"headline",text:"text"},options:{title:!1},initialize:function(e,t,n){VCO.Util.setData(this,e);VCO.Util.mergeData(this.options,t);this._el.container=VCO.Dom.create("div","vco-text");this._el.container.id=this.data.uniqueid;this._initLayout();n&&n.appendChild(this._el.container)},show:function(){},hide:function(){},addTo:function(e){e.appendChild(this._el.container)},removeFrom:function(e){e.removeChild(this._el.container)},headlineHeight:function(){return this._el.headline.offsetHeight+40},onLoaded:function(){this.fire("loaded",this.data)},onAdd:function(){this.fire("added",this.data)},onRemove:function(){this.fire("removed",this.data)},_initLayout:function(){this._el.content_container=VCO.Dom.create("div","vco-text-content-container",this._el.container);if(this.data.headline!=""){var e="vco-headline";this.options.title&&(e="vco-headline vco-headline-title");this._el.headline=VCO.Dom.create("h2",e,this._el.content_container);this._el.headline.innerHTML=this.data.headline}if(this.data.text!=""){this._el.content=VCO.Dom.create("div","vco-text-content",this._el.content_container);this._el.content.innerHTML=VCO.Util.htmlify(this.data.text)}this.onLoaded()}});VCO.Media.Twitter=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-twitter",this._el.content);this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";e="http://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?";VCO.getJSON(e,function(e){t.createMedia(e)})},createMedia:function(e){var t="",n="",r="",i="",s="",o="";n=e.html.split("</p>&mdash;")[0]+"</p></blockquote>";r=e.author_url.split("twitter.com/")[1];i=e.html.split("</p>&mdash;")[1].split('<a href="')[1];s=i.split('">')[0];o=i.split('">')[1].split("</a>")[0];t+=n;t+="<div class='vcard'>";t+="<a href='"+s+"' class='twitter-date' target='_blank'>"+o+"</a>";t+="<div class='author'>";t+="<a class='screen-name url' href='"+e.author_url+"' target='_blank'>";t+="<span class='avatar'></span>";t+="<span class='fn'>"+e.author_name+" <span class='vco-icon-twitter'></span></span>";t+="<span class='nickname'>@"+r+"<span class='thumbnail-inline'></span></span>";t+="</a>";t+="</div>";t+="</div>";this._el.content_item.innerHTML=t;this.onLoaded()},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}});VCO.Media.Vimeo=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-vimeo vco-media-shadow",this._el.content);this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];e="http://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff";this.player=VCO.Dom.create("iframe","",this._el.content_item);this.player.width="100%";this.player.height="100%";this.player.frameBorder="0";this.player.src=e;this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"},_stopMedia:function(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"http://player.vimeo.com")}catch(e){trace(e)}}});VCO.Media.DailyMotion=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-dailymotion",this._el.content);this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0];e="http://www.dailymotion.com/embed/video/"+this.media_id;this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>";this.onLoaded()},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"}});VCO.Media.Vine=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-iframe vco-media-vine vco-media-shadow",this._el.content);this.media_id=this.data.url.split("vine.co/v/")[1];e="https://vine.co/v/"+this.media_id+"/embed/simple";this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='http://platform.vine.co/static/scripts/embed.js' charset='utf-8'></script>";this.onLoaded()},_updateMediaDisplay:function(){var e=VCO.Util.ratio.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}});VCO.Media.Website=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){},createMedia:function(e){this.onLoaded()}});VCO.Media.Wikipedia=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e,t,n=this;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-wikipedia",this._el.content);this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," ");this.media_id=this.media_id.replace(" ","%20");t=this.data.url.split("//")[1].split(".wikipedia")[0];e="http://"+t+".wikipedia.org/w/api.php?action=query&prop=extracts&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?";VCO.getJSON(e,function(e){n.createMedia(e)})},createMedia:function(e){var t="";if(e.query){var n,t={entry:{},title:"",text:"",extract:"",paragraphs:1,text_array:[]};t.entry=VCO.Util.getObjectAttributeByIndex(e.query.pages,0);t.extract=t.entry.extract;t.title=t.entry.title;t.extract.match("<p>")?t.text_array=t.extract.split("<p>"):t.text_array.push(t.extract);for(var r=0;r<t.text_array.length;r++)r+1<=t.paragraphs&&r+1<t.text_array.length&&(t.text+="<p>"+t.text_array[r+1]);n="<h4><a href='"+this.data.url+"' target='_blank'>"+t.title+"</a></h4>";n+="<span class='wiki-source'>"+VCO.Language.messages.wikipedia+"</span>";n+=t.text;if(!t.extract.match("REDIRECT")){this._el.content_item.innerHTML=n;this.onLoaded()}}},updateMediaDisplay:function(){},_updateMediaDisplay:function(){}});VCO.Media.YouTube=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){var e=this,t;this.message.updateMessage(VCO.Language.messages.loading+" "+this.options.media_name);this.youtube_loaded=!1;this._el.content_item=VCO.Dom.create("div","vco-media-item vco-media-youtube vco-media-shadow",this._el.content);this._el.content_item.id=VCO.Util.unique_ID(7);t=VCO.Util.getUrlVars(this.data.url);this.media_id={};this.data.url.match("v=")?this.media_id.id=t.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:trace("YOUTUBE IN URL BUT NOT A VALID VIDEO");this.media_id.start=t.t;this.media_id.hd=t.hd;VCO.Load.js("https://www.youtube.com/player_api",function(){e.createMedia()})},_updateMediaDisplay:function(){this._el.content_item.style.height=VCO.Util.ratio.r16_9({w:this._el.content_item.offsetWidth})+"px"},_stopMedia:function(){if(this.youtube_loaded)try{this.player.pauseVideo()}catch(e){trace(e)}},createMedia:function(){var e=this;if(typeof this.media_id.start!="undefined"){var t=this.media_id.start.toString(),n=0,r=0;if(t.match("m")){n=parseInt(t.split("m")[0],10);r=parseInt(t.split("m")[1].split("s")[0],10);this.media_id.start=n*60+r}else this.media_id.start=0}else this.media_id.start=0;typeof this.media_id.hd!="undefined"?this.media_id.hd=!0:this.media_id.hd=!1;this.createPlayer()},createPlayer:function(){var e=this;clearTimeout(this.timer);typeof YT!="undefined"&&typeof YT.Player!="undefined"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",start:this.media_id.start,rel:0},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady();e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createPlayer()},1e3)},onPlayerReady:function(e){this.youtube_loaded=!0},onStateChange:function(e){}});VCO.Media.Slider=VCO.Media.extend({includes:[VCO.Events],_loadMedia:function(){this._el.content_item=VCO.Dom.create("img","vco-media-item vco-media-image",this._el.content);this._el.content_item.src=this.data.url;this.onLoaded()}});VCO.Slide=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(e,t,n){this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}};this._media=null;this._mediaclass={};this._text={};this._state={loaded:!1};this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:"#FFF"}};this.has.title=n;this.data={uniqueid:null,background:null,date:null,location:null,text:null,media:null};this.options={duration:1e3,slide_padding_lr:40,ease:VCO.Ease.easeInSpline,width:600,height:600,skinny_size:650,media_name:""};this.active=!1;this.animator={};VCO.Util.mergeData(this.options,t);VCO.Util.mergeData(this.data,e);this._initLayout();this._initEvents()},show:function(){trace("show");this.animator=VCO.Animate(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})},hide:function(){},setActive:function(e){this.active=e;if(this.active){this.data.background&&this.fire("background_change",this.has.background);this.loadMedia()}else this.stopMedia()},addTo:function(e){e.appendChild(this._el.container)},removeFrom:function(e){e.removeChild(this._el.container)},updateDisplay:function(e,t,n){this._updateDisplay(e,t,n)},loadMedia:function(){if(this._media&&!this._state.loaded){this._media.loadMedia();this._state.loaded=!0}},stopMedia:function(){this._media&&this._state.loaded&&this._media.stopMedia()},getBackground:function(){return this.has.background},scrollToTop:function(){this._el.container.scrollTop=0},_initLayout:function(){this._el.container=VCO.Dom.create("div","vco-slide");this.data.uniqueid&&(this._el.container.id=this.data.uniqueid);this._el.scroll_container=VCO.Dom.create("div","vco-slide-scrollable-container",this._el.container);this._el.content_container=VCO.Dom.create("div","vco-slide-content-container",this._el.scroll_container);this._el.content=VCO.Dom.create("div","vco-slide-content",this._el.content_container);this._el.background=VCO.Dom.create("div","vco-slide-background",this._el.container);if(this.data.background){if(this.data.background.url){this.has.background.image=!0;this._el.container.className+=" vco-full-image-background";this.has.background.color_value="#000";this._el.background.style.backgroundImage="url('"+this.data.background.url+"')";this._el.background.style.display="block"}if(this.data.background.color){this.has.background.color=!0;this._el.container.className+=" vco-full-color-background";this.has.background.color_value=this.data.background.color}this.data.background.text_background&&(this._el.container.className+=" vco-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0);this.data.text&&this.data.text.text&&(this.has.text=!0);this.data.text&&this.data.text.headline&&(this.has.headline=!0);if(this.has.media){this.data.media.mediatype=VCO.MediaType(this.data.media);this.options.media_name=this.data.media.mediatype.name;this.options.media_type=this.data.media.mediatype.type;this._media=new this.data.media.mediatype.cls(this.data.media,this.options)}if(this.has.text||this.has.headline)this._text=new VCO.Media.Text(this.data.text,{title:this.has.title});if(!this.has.text&&!this.has.headline&&this.has.media){this._el.container.className+=" vco-slide-media-only";this._media.addTo(this._el.content)}else if(this.has.headline&&this.has.media&&!this.has.text){this._el.container.className+=" vco-slide-media-only";this._text.addTo(this._el.content);this._media.addTo(this._el.content)}else if(this.has.text&&this.has.media){this._media.addTo(this._el.content);this._text.addTo(this._el.content)}else if(this.has.text||this.has.headline){this._el.container.className+=" vco-slide-text-only";this._text.addTo(this._el.content)}this.onLoaded()},_initEvents:function(){},_updateDisplay:function(e,t,n){e?this.options.width=e:this.options.width=this._el.container.offsetWidth;if(VCO.Browser.mobile&&this.options.width<=this.options.skinny_size){this._el.content.style.paddingLeft="0px";this._el.content.style.paddingRight="0px";this._el.content.style.width=this.options.width-0+"px"}else if(n=="landscape"){this._el.content.style.paddingLeft="40px";this._el.content.style.paddingRight="75px";this._el.content.style.width=this.options.width-115+"px"}else if(this.options.width<=this.options.skinny_size){this._el.content.style.paddingLeft=this.options.slide_padding_lr+"px";this._el.content.style.paddingRight=this.options.slide_padding_lr+"px";this._el.content.style.width=this.options.width-this.options.slide_padding_lr*2+"px"}else{this._el.content.style.paddingLeft=this.options.slide_padding_lr+"px";this._el.content.style.paddingRight=this.options.slide_padding_lr+"px";this._el.content.style.width=this.options.width-this.options.slide_padding_lr*2+"px"}t?this.options.height=t:this.options.height=this._el.container.offsetHeight;this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(this.options.width,this.options.height-this._text.headlineHeight(),n):this._media.updateDisplay(this.options.width,this.options.height,n))}});VCO.SlideNav=VCO.Class.extend({includes:[VCO.Events,VCO.DomMixins],_el:{},initialize:function(e,t,n){this._el={container:{},content_container:{},icon:{},title:{},description:{}};this.mediatype={};this.data={title:"Navigation",description:"Description"};this.options={direction:"previous"};this.animator=null;VCO.Util.mergeData(this.options,t);VCO.Util.mergeData(this.data,e);this._el.container=VCO.Dom.create("div","vco-slidenav-"+this.options.direction);VCO.Browser.mobile&&this._el.container.setAttribute("ontouchstart"," ");this._initLayout();this._initEvents();n&&n.appendChild(this._el.container)},update:function(e){this._update(e)},setColor:function(e){e?this._el.content_container.className="vco-slidenav-content-container vco-slidenav-inverted":this._el.content_container.className="vco-slidenav-content-container"},_onMouseClick:function(){this.fire("clicked",this.options)},_update:function(e){this.data=VCO.Util.mergeData(this.data,e);this.data.title!=""&&(this._el.title.innerHTML=this.data.title);this.data.date!=""&&(this._el.description.innerHTML=this.data.description)},_initLayout:function(){this._el.content_container=VCO.Dom.create("div","vco-slidenav-content-container",this._el.container);this._el.icon=VCO.Dom.create("div","vco-slidenav-icon",this._el.content_container);this._el.title=VCO.Dom.create("div","vco-slidenav-title",this._el.content_container);this._el.description=VCO.Dom.create("div","vco-slidenav-description",this._el.content_container);this._el.icon.innerHTML="&nbsp;";this._update()},_initEvents:function(){VCO.DomEvent.addListener(this._el.container,"click",this._onMouseClick,this)}});VCO.StorySlider=VCO.Class.extend({includes:VCO.Events,initialize:function(e,t,n,r){this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}};this._nav={};this._nav.previous={};this._nav.next={};this.slide_spacing=0;this._slides=[];this._swipable;this.preloadTimer;this._message;this.current_slide=0;this.data={uniqueid:"",slides:[{uniqueid:"",background:{url:null,color:null,opacity:50},date:null,location:{lat:-9.143962,lon:38.731094,zoom:13,icon:"http://maps.gstatic.com/intl/en_us/mapfiles/ms/micons/blue-pushpin.png"},text:{headline:"Slideshow Example",text:"Example slideshow slide "},media:[{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}},{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}},{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}},{uniqueid:"",text:{headline:"Slideshow Example",text:""},media:{url:"http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg",credit:"",caption:"",link:null,link_target:null}}]},{uniqueid:"",background:{url:null,color:null,opacity:50},date:null,location:{lat:-9.143962,lon:38.731094,zoom:13,icon:"http://maps.gstatic.com/intl/en_us/mapfiles/ms/micons/blue-pushpin.png"},text:{headline:"YouTube",text:"Just add a link to the video in the media field."},media:{url:"http://www.youtube.com/watch?v=lIvftGgps24",credit:"",caption:"",link:null,link_target:null}}]};this.options={id:"",layout:"portrait",width:600,height:600,slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:VCO.Ease.easeInOutQuint,dragging:!0,trackResize:!0};if(typeof e=="object"){this._el.container=e;this.options.id=VCO.Util.unique_ID(6,"vco")}else{this.options.id=e;this._el.container=VCO.Dom.get(e)}this._el.container.id||(this._el.container.id=this.options.id);this.animator=null;VCO.Util.mergeData(this.options,n);VCO.Util.mergeData(this.data,t);r&&this.init()},init:function(){this._initLayout();this._initEvents();this._initData();this._updateDisplay();this.goTo(this.options.start_at_slide);this._onLoaded()},updateDisplay:function(e,t,n,r){this._updateDisplay(e,t,n,r)},createSlide:function(e){this._createSlide(e)},createSlides:function(e){this._createSlides(e)},_createSlides:function(e){for(var t=0;t<e.length;t++){e[t].uniqueid==""&&(e[t].uniqueid=VCO.Util.unique_ID(6,"vco-slide"));t==0?this._createSlide(e[t],!0):this._createSlide(e[t],!1)}},_createSlide:function(e,t){var n=new VCO.Slide(e,this.options,t);this._addSlide(n);this._slides.push(n)},_destroySlide:function(e){this._removeSlide(e);for(var t=0;t<this._slides.length;t++)this._slides[t]==e&&this._slides.splice(t,1)},_addSlide:function(e){e.addTo(this._el.slider_item_container);e.on("added",this._onSlideAdded,this);e.on("background_change",this._onBackgroundChange,this)},_removeSlide:function(e){e.removeFrom(this._el.slider_item_container);e.off("added",this._onSlideAdded,this);e.off("background_change",this._onBackgroundChange)},goTo:function(e,t,n){var r=this;this.changeBackground({color_value:"#FFF",image:!1});this.preloadTimer&&clearTimeout(this.preloadTimer);for(var i=0;i<this._slides.length;i++)this._slides[i].setActive(!1);if(e<this._slides.length&&e>=0){this.current_slide=e;this.animator&&this.animator.stop();this._swipable&&this._swipable.stopMomentum();if(t){this._el.slider_container.style.left=-(this.slide_spacing*e)+"px";this._onSlideChange(n)}else this.animator=VCO.Animate(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(n)});this._slides[this.current_slide].setActive(!0);if(this._slides[this.current_slide+1]){this.showNav(this._nav.next,!0);this._nav.next.update(this.getNavInfo(this._slides[this.current_slide+1]))}else this.showNav(this._nav.next,!1);if(this._slides[this.current_slide-1]){this.showNav(this._nav.previous,!0);this._nav.previous.update(this.getNavInfo(this._slides[this.current_slide-1]))}else this.showNav(this._nav.previous,!1);this.preloadTimer=setTimeout(function(){r.preloadSlides()},this.options.duration)}},preloadSlides:function(){if(this._slides[this.current_slide+1]){this._slides[this.current_slide+1].loadMedia();this._slides[this.current_slide+1].scrollToTop()}if(this._slides[this.current_slide+2]){this._slides[this.current_slide+2].loadMedia();this._slides[this.current_slide+2].scrollToTop()}if(this._slides[this.current_slide-1]){this._slides[this.current_slide-1].loadMedia();this._slides[this.current_slide-1].scrollToTop()}if(this._slides[this.current_slide-2]){this._slides[this.current_slide-2].loadMedia();this._slides[this.current_slide-2].scrollToTop()}},getNavInfo:function(e){var t={title:"",description:""};e.data.text&&e.data.text.headline&&(t.title=e.data.text.headline);return t},next:function(){this.current_slide+1<this._slides.length?this.goTo(this.current_slide+1):this.goTo(this.current_slide)},previous:function(){this.current_slide-1>=0?this.goTo(this.current_slide-1):this.goTo(this.current_slide)},showNav:function(e,t){this.options.width<=500&&VCO.Browser.mobile||(t?e.show():e.hide())},changeBackground:function(e){var t={r:256,g:256,b:256},n,r=this.options.slide_default_fade,i="15%",s="0.87",o="";e.color_value&&(t=VCO.Util.hexToRgb(e.color_value));n=t.r+","+t.g+","+t.b;this._el.background.style.backgroundImage="none";if(this.options.layout=="landscape"){this._nav.next.setColor(!1);this._nav.previous.setColor(!1);t.r<255&&t.g<255&&t.b<255&&(r="0%");e.image;o+="background-image: -webkit-linear-gradient(left, color-stop(rgba("+n+",0.0001 ) "+r+"), color-stop(rgba("+n+","+s+") "+i+"));";o+="background-image: linear-gradient(to right, rgba("+n+",0.0001 ) "+r+", rgba("+n+","+s+") "+i+");";o+="background-repeat: repeat-x;"
;o+="filter: e(%('progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d', GradientType=1)',argb("+n+", 0.0001),argb("+n+",0.80)));";this._el.background.setAttribute("style",o)}else{e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="#FFF";if(t.r<255&&t.g<255&&t.b<255||e.image){this._nav.next.setColor(!0);this._nav.previous.setColor(!0)}else{this._nav.next.setColor(!1);this._nav.previous.setColor(!1)}}},_updateDisplay:function(e,t,n,r){var i,s;typeof r=="undefined"?s=this.options.layout:s=r;this.options.layout=s;this.slide_spacing=this.options.width*2;e?this.options.width=e:this.options.width=this._el.container.offsetWidth;t?this.options.height=t:this.options.height=this._el.container.offsetHeight;i=this.options.height/2;this._nav.next.setPosition({top:i});this._nav.previous.setPosition({top:i});for(var o=0;o<this._slides.length;o++){this._slides[o].updateDisplay(this.options.width,this.options.height,s);this._slides[o].setPosition({left:this.slide_spacing*o,top:0})}this.goTo(this.current_slide,!0,!0)},_initLayout:function(){this._el.container.className+=" vco-storyslider";this._el.slider_container_mask=VCO.Dom.create("div","vco-slider-container-mask",this._el.container);this._el.background=VCO.Dom.create("div","vco-slider-background",this._el.container);this._el.slider_container=VCO.Dom.create("div","vco-slider-container vcoanimate",this._el.slider_container_mask);this._el.slider_item_container=VCO.Dom.create("div","vco-slider-item-container",this._el.slider_container);this.options.width=this._el.container.offsetWidth;this.options.height=this._el.container.offsetHeight;this._nav.previous=new VCO.SlideNav({title:"Previous",description:"description"},{direction:"previous"});this._nav.next=new VCO.SlideNav({title:"Next",description:"description"},{direction:"next"});this._nav.next.addTo(this._el.container);this._nav.previous.addTo(this._el.container);this._el.slider_container.style.left="0px";if(VCO.Browser.touch){this._swipable=new VCO.Swipable(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0});this._swipable.enable();this._message=new VCO.Message({},{message_class:"vco-message-full",message_icon_class:"vco-icon-swipe-left"});this._message.updateMessage("Swipe to Navigate<br><span class='vco-button'>OK</span>");this._message.addTo(this._el.container)}},_initEvents:function(){this._nav.next.on("clicked",this._onNavigation,this);this._nav.previous.on("clicked",this._onNavigation,this);this._message&&this._message.on("clicked",this._onMessageClick,this);if(this._swipable){this._swipable.on("swipe_left",this._onNavigation,this);this._swipable.on("swipe_right",this._onNavigation,this);this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this)}},_initData:function(){this._createSlides(this.data.slides)},_onBackgroundChange:function(e){var t;t=this._slides[this.current_slide].getBackground();this.changeBackground(e);this.fire("colorchange",t)},_onMessageClick:function(e){this._message.hide()},_onSwipeNoDirection:function(e){this.goTo(this.current_slide)},_onNavigation:function(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous();this.fire("nav_"+e.direction,this.data)},_onSlideAdded:function(e){trace("slideadded");this.fire("slideAdded",this.data)},_onSlideRemoved:function(e){this.fire("slideAdded",this.data)},_onSlideChange:function(e){e||this.fire("change",{current_slide:this.current_slide})},_onMouseClick:function(e){},_fireMouseEvent:function(e){if(!this._loaded)return;var t=e.type;t=t==="mouseenter"?"mouseover":t==="mouseleave"?"mouseout":t;if(!this.hasEventListeners(t))return;t==="contextmenu"&&VCO.DomEvent.preventDefault(e);this.fire(t,{latlng:"something",layerPoint:"something else"})},_onLoaded:function(){this.fire("loaded",this.data)}});VCO.VideoSlider=VCO.Class.extend({includes:VCO.Events,initialize:function(e,t,n){var r=this;this.version="0.1.16";this.ready=!1;this._el={container:{},storyslider:{},map:{},menubar:{}};typeof e=="object"?this._el.container=e:this._el.container=VCO.Dom.get(e);this._storyslider={};this._map={};this._menubar={};this._loaded={storyslider:!1,map:!1};this.data={uniqueid:"",slides:[{uniqueid:"",type:"overview",background:{url:"http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Mark_Twain_by_Abdullah_Fr%C3%A8res%2C_1867.jpg/418px-Mark_Twain_by_Abdullah_Fr%C3%A8res%2C_1867.jpg",color:"",opacity:50},date:"1835",text:{headline:"Mark Twain",text:'Samuel Langhorne Clemens (November 30, 1835  April 21, 1910), better known by his pen name Mark Twain, was an American author and humorist. He wrote The Adventures of Tom Sawyer (1876) and its sequel, Adventures of Huckleberry Finn (1885), the latter often called "the Great American Novel."'},media:null},{uniqueid:"",date:"1835",location:{lat:39.491711,lon:-91.79326,name:"Florida, Missouri",zoom:12,icon:"http://maps.gstatic.com/intl/en_us/mapfiles/ms/micons/blue-pushpin.png",line:!0},text:{headline:"Florida, Missouri",text:"Born in Florida, Missouri. Halleys comet visible from earth."},media:{url:"http://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Mark_Twain_birthplace.jpg/800px-Mark_Twain_birthplace.jpg",credit:"",caption:"Mark Twain's birthplace, Florida, Missouri"}}]};this.options={script_path:"",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,layout:"landscape",base_class:"",map_size_sticky:3,map_center_offset:null,less_bounce:!0,start_at_slide:0,menubar_height:0,skinny_size:650,duration:1e3,ease:VCO.Ease.easeInOutQuint,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",map_mini:!0,map_subdomains:"",map_as_image:!1,map_background_color:"#d9d9d9",zoomify:{path:"",width:"",height:"",tolerance:.8,attribution:""},map_height:300,storyslider_height:600,slide_padding_lr:45,slide_default_fade:"0%",menubar_default_y:0,path_gfx:"gfx",map_popup:!1,zoom_distance:100,calculate_zoom:!0,use_custom_markers:!1,line_follows_path:!0,line_color:"#DA0000",line_color_inactive:"#CCC",line_join:"miter",line_weight:3,line_opacity:.8,line_dash:"5,5",show_lines:!0,show_history_line:!0,api_key_flickr:"f2cc870b4d233dd0a5bfe73fd0d64ef0",language:"en"};this.current_slide=this.options.start_at_slide;this.animator_map=null;this.animator_storyslider=null;VCO.Util.mergeData(this.options,n);this.options.layout=="landscape"&&(this.options.map_center_offset={left:-200,top:0});this.options.map_type=="zoomify"&&this.options.map_as_image&&(this.options.map_size_sticky=2);if(this.options.language=="en"){this.options.language=VCO.Language;this._initData(t)}else VCO.Load.js(this.options.script_path+"/locale/"+this.options.language+".js",function(){r._initData(t)});return this},updateDisplay:function(){this.ready&&this._updateDisplay()},_initData:function(e){var t=this;if(typeof e=="string")VCO.getJSON(e,function(e){e&&e.storymap&&VCO.Util.mergeData(t.data,e.storymap);t._onDataLoaded()});else if(typeof e=="object"){e.storymap?t.data=e.storymap:trace("data must have a storymap property");t._onDataLoaded()}else t._onDataLoaded()},_initLayout:function(){var e=this;this._el.container.className+=" vco-videoslider";this.options.base_class=this._el.container.className;this._el.storyslider=VCO.Dom.create("div","vco-storyslider",this._el.container);this.options.width=this._el.container.offsetWidth;this.options.height=this._el.container.offsetHeight;this._el.map.style.height="1px";this._el.storyslider.style.top="1px";this._el.map.style.backgroundColor=this.options.map_background_color;this._storyslider=new VCO.StorySlider(this._el.storyslider,this.data,this.options);this._storyslider.on("loaded",this._onStorySliderLoaded,this);this._storyslider.init()},_initEvents:function(){this._menubar.on("collapse",this._onMenuBarCollapse,this);this._menubar.on("back_to_start",this._onBackToStart,this);this._menubar.on("overview",this._onOverview,this);this._storyslider.on("change",this._onSlideChange,this);this._storyslider.on("colorchange",this._onColorChange,this);this._map.on("change",this._onMapChange,this)},_updateDisplay:function(e,t,n){var r=this.options.duration,i=this.options.base_class,s=this;n&&(r=n);this.options.width=this._el.container.offsetWidth;this.options.height=this._el.container.offsetHeight;this.options.width<=this.options.skinny_size?this.options.layout="portrait":this.options.layout="landscape";e&&(this.options.map_height=e);if(VCO.Browser.touch){this.options.layout=VCO.Browser.orientation();i+=" vco-mobile"}if(this.options.layout=="portrait"){i+=" vco-skinny";this._map.setMapOffset(0,0);this.options.map_height=this.options.height/this.options.map_size_sticky;this.options.storyslider_height=this.options.height-this.options.map_height-1;this._menubar.setSticky(0);i+=" vco-layout-portrait";if(t){this.animator_map&&this.animator_map.stop();this.animator_map=VCO.Animate(this._el.map,{height:this.options.map_height+"px",duration:r,easing:VCO.Ease.easeOutStrong,complete:function(){s._map.updateDisplay(s.options.width,s.options.map_height,t,n,s.options.menubar_height)}});this.animator_storyslider&&this.animator_storyslider.stop();this.animator_storyslider=VCO.Animate(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:r,easing:VCO.Ease.easeOutStrong})}else{this._el.map.style.height=Math.ceil(this.options.map_height)+"px";this._el.storyslider.style.height=this.options.storyslider_height+"px"}this._menubar.updateDisplay(this.options.width,this.options.height,t);this._map.updateDisplay(this.options.width,this.options.height,!1);this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,t,this.options.layout)}else{i+=" vco-layout-landscape";this.options.menubar_height=this._el.menubar.offsetHeight;this.options.map_height=this.options.height;this.options.storyslider_height=this.options.height;this._menubar.setSticky(this.options.menubar_height);this._menubar.setSticky(this.options.menubar_height);this._el.map.style.height=this.options.height+"px";this._map.setMapOffset(-(this.options.width/4),0);this._el.storyslider.style.top=0;this._el.storyslider.style.height=this.options.storyslider_height+"px";this._menubar.updateDisplay(this.options.width,this.options.height,t);this._map.updateDisplay(this.options.width,this.options.height,t,n);this._storyslider.updateDisplay(this.options.width/2,this.options.storyslider_height,t,this.options.layout)}this._el.container.className=i},_onDataLoaded:function(e){trace("dataloaded");this.fire("dataloaded");this._initLayout();this._initEvents();this.ready=!0},_onColorChange:function(e){e.color||e.image?this._menubar.setColor(!0):this._menubar.setColor(!1)},_onSlideChange:function(e){if(this.current_slide!=e.current_slide){this.current_slide=e.current_slide;this._map.goTo(this.current_slide);this.fire("change",{current_slide:this.current_slide},this)}},_onMapChange:function(e){if(this.current_slide!=e.current_marker){this.current_slide=e.current_marker;this._storyslider.goTo(this.current_slide);this.fire("change",{current_slide:this.current_slide},this)}},_onOverview:function(e){this._map.markerOverview()},_onBackToStart:function(e){this.current_slide=0;this._map.goTo(this.current_slide);this._storyslider.goTo(this.current_slide);this.fire("change",{current_slide:this.current_slide},this)},_onMenuBarCollapse:function(e){this._updateDisplay(e.y,!0)},_onMouseClick:function(e){},_fireMouseEvent:function(e){if(!this._loaded)return;var t=e.type;t=t==="mouseenter"?"mouseover":t==="mouseleave"?"mouseout":t;if(!this.hasEventListeners(t))return;t==="contextmenu"&&VCO.DomEvent.preventDefault(e);this.fire(t,{latlng:"something",layerPoint:"something else"})},_onMapLoaded:function(){this._loaded.map=!0;this._onLoaded()},_onStorySliderLoaded:function(){this._loaded.storyslider=!0;this._onLoaded()},_onLoaded:function(){this._loaded.storyslider&&this._loaded.map&&this.fire("loaded",this.data)}});